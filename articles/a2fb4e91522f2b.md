---
title: "Python ftplib FTPæ“ä½œ"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "ftp"]
published: true
---
# Python ftplibã®FTPæ“ä½œ
å…¬å¼
https://docs.python.org/ja/3/library/ftplib.html

## æ¥ç¶šã™ã‚‹
~~~python
import ftplib

ftp = ftplib.FTP()
ftp.connect('xxx.xxx.xxx.xxx', 21)
msg = ftp.login('user', 'password')
~~~
`ftp.login(user, password)`ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™ã€‚æˆåŠŸã™ã‚‹ã¨ã€
>230 User ãƒ¦ãƒ¼ã‚¶ãƒ¼å logged in

FTP Response Codeã®ä¸€è¦§ã¯ã“ã¡ã‚‰
https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes

Passive/Activeã®è¨­å®šã¯ã“ã†ã™ã‚‹ã€‚DefaultãŒPassiveãªã®ã§Trueãªã‚‰çœç•¥ã€‚
~~~python
ftp.set_pasv(True)
~~~

## Directoryã¨Fileã‚’ç¢ºèª
~~~python
# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å–å¾—
ftp_current_dir = ftp.pwd()

# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•
ftp.cwd('/foo/bar')

# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’ãƒªã‚¹ãƒˆã§å–å¾—
file_list = ftp.nlst(".") 
~~~

## ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€å‰Šé™¤
~~~python
# upload
with open('C:/upload/suru/file.jpg', "rb") as f:
    ftp.storbinary("STOR ./upload/sakino/dir/to/file_name.txt', f)

# download
with open('C:/download/surudir/file.jpg', 'wb') as f:
    ftp.retrbinary('RETR file.jpg', f.write)

# delete
ftp.delete(file.jpg)
~~~
