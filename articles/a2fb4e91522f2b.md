---
title: "Python ftplib FTP操作"
emoji: "👻"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["python", "ftp"]
published: false
---
# Python ftplibのFTP操作
公式
https://docs.python.org/ja/3/library/ftplib.html

## 接続する
~~~
import ftplib

ftp = ftplib.FTP()
ftp.connect('xxx.xxx.xxx.xxx', 21)
msg = ftp.login('user', 'password')
~~~
`ftp.login(user, password)`は、メッセージを返す。成功すると、
>230 User ユーザー名 logged in

FTP Response Codeの一覧はこちら
https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes

Passive/Activeの設定はこうする。DefaultがPassiveなのでTrueなら省略。
~~~
ftp.set_pasv(True)
~~~

## DirectoryとFileを確認
~~~
# カレントディレクトリを取得
ftp_current_dir = ftp.pwd()

# カレントディレクトリを移動
ftp.cwd('/foo/bar')

# カレントディレクトリのファイル一覧をリストで取得
file_list = ftp.nlst(".") 
~~~

## ファイルをアップロード
~~~
with open('C:/upload/suru/file.txt', "rb") as f:
    self._ftp.storbinary("STOR ./upload/sakino/dir/to/file_name.txt', f)
~~~