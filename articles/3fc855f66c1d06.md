---
title: "unittest"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "unittest"]
published: true
---
###### å…¬å¼
https://docs.python.org/ja/3/library/unittest.html

# åŸºæœ¬å½¢
~~~python
import unittest
import test_suru_module

class TestClass(unittest.TestCase):
    def setUp(self):
        # å„ãƒ†ã‚¹ãƒˆå…±é€šã®å‡¦ç†
        self.instance = test_suru_module.a_constructor()

    def test_sono_ichi(self):
        # ã„ã‚ã„ã‚ãªassert
        self.assertEqual(inserted_child_ids, child_id)
        self.assertTrue(instance.is_valid)

    def test_reigai(self):
        # ä¾‹å¤–ãŒå‡ºã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
        self.assertRaises(ZeroDivisionError, test_suru_module.wari_zan, (3, 0))
        # ã“ã‚Œã§ã‚‚OK
        with self.assertRaises(ZeroDivisionError):
            test_suru_module.wari_zan(3, 0)

if __name__ == '__main__':
    unittest.main()
~~~

# ã„ã‚ã„ã‚ãªassertion
~~~python
assertTrue(expr, msg=None)
assertFalse(expr, msg=None)

# ç­‰ã—ã„ã‹ã©ã†ã‹ã€‚å‹ã”ã¨ã«å°‚ç”¨MethodãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ã¾ã™
assertEqual(first, second, msg=None)
assertNotEqual(first, second, msg=None)

# objectãŒåŒä¸€ã‹ã©ã†ã‹
assertIs(first, second, msg=None)
assertIsNot(first, second, msg=None)

# Noneã‹ã©ã†ã‹
assertIsNone(expr, msg=None)
assertIsNotNone(expr, msg=None)

# å«ã¾ã‚Œã‚‹ã‹ã©ã†ã‹
assertIn(member, container, msg=None)
assertNotIn(member, container, msg=None)

# instanceã®typeã‚’ç¢ºèª
assertIsInstance(obj, cls, msg=None)
assertNotIsInstance(obj, cls, msg=None)

# é–¾å€¤ä»˜ãã§ã ã„ãŸã„ç­‰ã—ã„ã‹ç­‰ã—ããªã„ã‹ã€‚æµ®å‹•å°æ•°ç‚¹ã¨ã‹ã«
assertAlmostEqual(first, second, places=7, msg=None, delta=None)
assertNotAlmostEqual(first, second, places=7, msg=None, delta=None)

self.assertIn('py', filename)

# å¤§å°ã‚’æ¯”è¼ƒ
assertGreater(first, second, msg=None)
assertGreaterEqual(first, second, msg=None)
assertLess(first, second, msg=None)
assertLessEqual(first, second, msg=None)

# regex ã®æ¤œç´¢ãŒ text ã¨ãƒãƒƒãƒã™ã‚‹ (ã¾ãŸã¯ãƒãƒƒãƒã—ãªã„) ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚
assertRegex(text, regex, msg=None)
assertNotRegex(text, regex, msg=None)

# å‡ºã¦ãã‚‹ä¾‹å¤–
assertRaises(exception, callable, *args, **kwds)
assertRaises(exception, *, msg=None)
# assertRaises() ã¨åŒç­‰ã§ã™ãŒã€ä¾‹å¤–ã®æ–‡å­—åˆ—è¡¨ç¾ãŒ regex ã«ãƒãƒƒãƒã™ã‚‹ã“ã¨ã‚‚ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚
assertRaisesRegex(exception, regex, callable, *args, **kwds)
assertRaisesRegex(exception, regex, *, msg=None)


assertWarns(warning, callable, *args, **kwds)
assertWarns(warning, *, msg=None)
# assertWarns() ã¨åŒç­‰ã§ã™ãŒã€è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ regex ã«ãƒãƒƒãƒã™ã‚‹ã“ã¨ã‚‚ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚ 
assertWarnsRegex(warning, regex, callable, *args, **kwds)
assertWarnsRegex(warning, regex, *, msg=None)
~~~
### assertEqualãŒå‘¼ã³å‡ºã—ã¦ã„ã‚‹Methods
~~~python
assertDictEqual(a, b)
assertListEqual(first, second, msg=None)
assertTupleEqual(first, second, msg=None)
assertSetEqual(first, second, msg=None)
assertDictEqual(first, second, msg=None)
assertMultiLineEqual(first, second, msg=None) # assertEqual()ãŒstringã‚’æ¯”è¼ƒã™ã‚‹ã¨ãã«è‡ªå‹•çš„ã«ä½¿ç”¨
assertSequenceEqual(first, second, msg=None, seq_type=None)
~~~